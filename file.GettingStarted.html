<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta name="Content-Type" content="text/html; charset=UTF-8" />
<title>File: GettingStarted</title>
<link rel="stylesheet" href="css/style.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '';
  if (relpath != '') relpath += '/';
</script>
<script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="js/app.js"></script>

  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="_index.html" title="Index">Index</a> &raquo; 
    <span class="title">File: GettingStarted</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  <a id="class_list_link" href="#">Class List</a>
  <a id="method_list_link" href="#">Method List</a>
  <a id ="file_list_link" href="#">File List</a>
</div>

      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><div id='filecontents'><h1>Getting Started with the VirtualBox Gem</h1>

<ul>
<li><a href="#basic-conventions">Basic Conventions</a>

<ul>
<li><a href="#bc-finding-models">Finding Models</a></li>
<li><a href="#bc-accessing-models">Accessing Models</a></li>
<li><a href="#bc-modifying-models">Modifying Models</a></li>
<li><a href="#bc-saving-models">Saving Models</a></li>
</ul>
</li>
</ul>


<p><a name="basic-conventions"></a></p>

<h1>Basic Conventions</h1>

<p>The entire virtualbox library follows a few conventions to make sure
things work uniformly across the entire codebase, and so that nothing
should surprise any developers once they understand these conventions.</p>

<p>When browsing the documentation, you'll probably notice that a lot of the
classes inherit from <tt><a href="VirtualBox/AbstractModel.html" title="VirtualBox::AbstractModel (class)">VirtualBox::AbstractModel</a></tt>. This just means that all
these classes act the same way! Every <tt><a href="VirtualBox/AbstractModel.html" title="VirtualBox::AbstractModel (class)">AbstractModel</a></tt>
shares the following behaviors:</p>

<ul>
<li>Finding</li>
<li>Accessing</li>
<li>Modifying</li>
<li>Saving</li>
</ul>


<p>These behaviors should be similar if not the exact same across all
virtualbox models. Each of these behaviors is covered below.</p>

<p><a name="bc-finding-models"></a></p>

<h2>Finding Models</h2>

<p>All data models have a <code>find</code> or <code>all</code> method (or sometimes both!) These
methods do what you expect them to: <code>all</code> will return an array of all instances
of that model which is typically unordered. <code>find</code> will allow you to find a
specific instance of that model, typically by name or UUID. Below are a couple
examples of this.</p>

<h3>All</h3>

<p>This example uses <tt><a href="VirtualBox/HardDrive.html" title="VirtualBox::HardDrive (class)">VirtualBox::HardDrive</a></tt>. As you can see, its just an
unmodified ruby <code>Array</code> which is returned by <code>all</code>. This can be used find,
sort, enumerate, etc.</p>

<pre class="code"><span class='drives identifier id'>drives</span> <span class='assign token'>=</span> <span class='VirtualBox constant id'>VirtualBox</span><span class='colon2 op'>::</span><span class='HardDrive constant id'>HardDrive</span><span class='dot token'>.</span><span class='all identifier id'>all</span>
<span class='puts identifier id'>puts</span> <span class='dstring node'>&quot;You have #{drives.length} hard drives!&quot;</span>

<span class='drives identifier id'>drives</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='drive identifier id'>drive</span><span class='bitor op'>|</span>
  <span class='puts identifier id'>puts</span> <span class='dstring node'>&quot;Drive: #{drive.uuid}&quot;</span>
<span class='end end kw'>end</span>
</pre>

<p>In the case that <code>all</code> returns an empty array, this simply means that none
of that model exist.</p>

<h3>Find</h3>

<p>This example uses <tt><a href="VirtualBox/VM.html" title="VirtualBox::VM (class)">VirtualBox::VM</a></tt>, which will probably be the most common
model you search for.</p>

<pre class="code"><span class='vm identifier id'>vm</span> <span class='assign token'>=</span> <span class='VirtualBox constant id'>VirtualBox</span><span class='colon2 op'>::</span><span class='VM constant id'>VM</span><span class='dot token'>.</span><span class='find identifier id'>find</span><span class='lparen token'>(</span><span class='string val'>&quot;MyVM&quot;</span><span class='rparen token'>)</span>
<span class='puts identifier id'>puts</span> <span class='dstring node'>&quot;This VM has #{vm.memory} MB of RAM allocated to it.&quot;</span>
</pre>

<p>Find can also be used with UUIDs:</p>

<pre class="code"><span class='vm identifier id'>vm</span> <span class='assign token'>=</span> <span class='VirtualBox constant id'>VirtualBox</span><span class='colon2 op'>::</span><span class='VM constant id'>VM</span><span class='dot token'>.</span><span class='find identifier id'>find</span><span class='lparen token'>(</span><span class='string val'>&quot;3d0f87b4-50f7-4fc5-ad89-93375b1b32a3&quot;</span><span class='rparen token'>)</span>
<span class='puts identifier id'>puts</span> <span class='dstring node'>&quot;This VM's name is: #{vm.name}&quot;</span>
</pre>

<p>When a find fails, it will return <code>nil</code>.</p>

<p><a name="bc-accessing-models"></a></p>

<h2>Accessing Models</h2>

<p>Every model has an <em>attribute list</em> associated with it. These attributes are
what can be accessed on the model via the typical ruby attribute accessing
syntax with the <code>.</code> (dot) operator. Because these methods are generated
dynamically, they don't show up as methods in the documentation. Because of this,
attributes are listed for every model in their overviews. For examples, see the
overviews of <tt><a href="VirtualBox/VM.html" title="VirtualBox::VM (class)">VirtualBox::VM</a></tt>, <tt><a href="VirtualBox/HardDrive.html" title="VirtualBox::HardDrive (class)">VirtualBox::HardDrive</a></tt>, etc.</p>

<p>In addition to an attribute list, many models also have <em>relationships</em>.
Relationships are, for our purposes, similar enough to attributes that they
can be treated the same. Relationship accessing methods are also dynamically
generated, so they are listed within the overviews of the models as well (if they
have any). Relationships allow two models to show that they are connected in some
way, and can therefore be accessed through each other.</p>

<h3>Attributes</h3>

<p>Reading attributes is simple. Let's use a <tt><a href="VirtualBox/VM.html" title="VirtualBox::VM (class)">VirtualBox::VM</a></tt> as an example:</p>

<pre class="code"><span class='vm identifier id'>vm</span> <span class='assign token'>=</span> <span class='VirtualBox constant id'>VirtualBox</span><span class='colon2 op'>::</span><span class='VM constant id'>VM</span><span class='dot token'>.</span><span class='find identifier id'>find</span><span class='lparen token'>(</span><span class='string val'>&quot;FooVM&quot;</span><span class='rparen token'>)</span>

<span class='comment val'># Accessing attributes:</span>
<span class='vm identifier id'>vm</span><span class='dot token'>.</span><span class='memory identifier id'>memory</span>
<span class='vm identifier id'>vm</span><span class='dot token'>.</span><span class='name identifier id'>name</span>
<span class='vm identifier id'>vm</span><span class='dot token'>.</span><span class='boot1 identifier id'>boot1</span>
<span class='vm identifier id'>vm</span><span class='dot token'>.</span><span class='ioapic identifier id'>ioapic</span>
</pre>

<h3>Relationships</h3>

<p>Relationships are read the exact same way as attributes. Again using a
<tt><a href="VirtualBox/VM.html" title="VirtualBox::VM (class)">VirtualBox::VM</a></tt> as an example:</p>

<pre class="code"><span class='vm identifier id'>vm</span> <span class='assign token'>=</span> <span class='VirtualBox constant id'>VirtualBox</span><span class='colon2 op'>::</span><span class='VM constant id'>VM</span><span class='dot token'>.</span><span class='find identifier id'>find</span><span class='lparen token'>(</span><span class='string val'>&quot;FooVM&quot;</span><span class='rparen token'>)</span>

<span class='comment val'># storage_controllers is a relationship containing an array of all the</span>
<span class='comment val'># storage controllers on this VM</span>
<span class='vm identifier id'>vm</span><span class='dot token'>.</span><span class='storage_controllers identifier id'>storage_controllers</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='sc identifier id'>sc</span><span class='bitor op'>|</span>
  <span class='puts identifier id'>puts</span> <span class='dstring node'>&quot;Storage Controller: #{sc.uuid}&quot;</span>
<span class='end end kw'>end</span>
</pre>

<p>The difference from an attribute is that while attributes are typically ruby
primitives such as <code>String</code> or <code>Boolean</code>, relationship objects are always other
virtualbox models such as <tt><a href="VirtualBox/StorageController.html" title="VirtualBox::StorageController (class)">VirtualBox::StorageController</a></tt>.</p>

<p><a name="bc-modifying-models"></a></p>

<h2>Modifying Models</h2>

<p>In addition to simply reading attributes and relationships, most can be modified
as well. I say "most" because some attributes are <code>readonly</code> and some relationships
simply don't support being directly modified (though their objects may, I'll get to
this in a moment). By looking at the attribute list it is easy to spot a readonly
attribute, which will have the <code>:readonly</code> option set to <code>true</code>. Below is an example
of what you might see in the overview of some model:</p>

<pre class="code"><span class='attribute identifier id'>attribute</span> <span class='symbol val'>:uuid</span><span class='comma token'>,</span> <span class='symbol val'>:readonly</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='true true kw'>true</span>
</pre>

<p>In the above case, you could read the <code>uuid</code> attribute as normal, but it wouldn't support
modification (and you'll simply get a <code>NoMethodError</code> if you try to set it).</p>

<p>Relationships are a little bit trickier, since when discussing modifying a relationship,
it could either be taken to mean the items <em>in</em> the relationship, or the relationship
itself. A good rule of thumb, assuming there exists a relationship <code>foos</code>,is if you ever
want to do <code>object.foos =</code> something, then you're <em>modifying the relationship</em> and <em>not</em>
the objects. But if you ever do <code>object.foos[0].destroy</code>, then you're <em>modifying the
relationship objects</em> and <em>not</em> the relationship itself.</p>

<h3>Attributes</h3>

<p>Attributes which support modification are modified like standard ruby attributes. The
following example uses <tt><a href="VirtualBox/HardDrive.html" title="VirtualBox::HardDrive (class)">VirtualBox::HardDrive</a></tt>:</p>

<pre class="code"><span class='hd identifier id'>hd</span> <span class='assign token'>=</span> <span class='VirtualBox constant id'>VirtualBox</span><span class='colon2 op'>::</span><span class='HardDrive constant id'>HardDrive</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
<span class='hd identifier id'>hd</span><span class='dot token'>.</span><span class='size identifier id'>size</span> <span class='assign token'>=</span> <span class='integer val'>2000</span> <span class='comment val'># megabytes</span>
<span class='hd identifier id'>hd</span><span class='dot token'>.</span><span class='format identifier id'>format</span> <span class='assign token'>=</span> <span class='string val'>&quot;VMDK&quot;</span>
</pre>

<p>As you can see, there is nothing sneaky going on here, and does what you expect.</p>

<h3>Relationships</h3>

<p>Modifying relationships, on the other hand, is a little different. If the model supports
modifying the relationship (which it'll note in its respective documentation), then
you can set it just like an attribute. Below, we use <tt><a href="VirtualBox/AttachedDevice.html" title="VirtualBox::AttachedDevice (class)">VirtualBox::AttachedDevice</a></tt> as
an example:</p>

<pre class="code"><span class='ad identifier id'>ad</span> <span class='assign token'>=</span> <span class='VirtualBox constant id'>VirtualBox</span><span class='colon2 op'>::</span><span class='AttachedDevice constant id'>AttachedDevice</span><span class='dot token'>.</span><span class='new identifier id'>new</span>

<span class='comment val'># Attached devices have an image relationship</span>
<span class='ad identifier id'>ad</span><span class='dot token'>.</span><span class='image identifier id'>image</span> <span class='assign token'>=</span> <span class='VirtualBox constant id'>VirtualBox</span><span class='colon2 op'>::</span><span class='DVD constant id'>DVD</span><span class='dot token'>.</span><span class='empty_drive identifier id'>empty_drive</span>
</pre>

<p>If a relationship doesn't support setting it, it will raise a <tt><a href="VirtualBox/Exceptions/NonSettableRelationshipException.html" title="VirtualBox::Exceptions::NonSettableRelationshipException (class)">VirtualBox::Exceptions::NonSettableRelationshipException</a></tt>.</p>

<p><strong>Note</strong>: Below is an example of modifying a relationship object, rather than a
relationship itself. The example below uses <tt><a href="VirtualBox/VM.html" title="VirtualBox::VM (class)">VirtualBox::VM</a></tt>.</p>

<pre class="code"><span class='vm identifier id'>vm</span> <span class='assign token'>=</span> <span class='VirtualBox constant id'>VirtualBox</span><span class='colon2 op'>::</span><span class='VM constant id'>VM</span><span class='dot token'>.</span><span class='find identifier id'>find</span><span class='lparen token'>(</span><span class='string val'>&quot;FooVM&quot;</span><span class='rparen token'>)</span>
<span class='vm identifier id'>vm</span><span class='dot token'>.</span><span class='storage_controllers identifier id'>storage_controllers</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='name identifier id'>name</span> <span class='assign token'>=</span> <span class='string val'>&quot;Foo Controller&quot;</span>
</pre>

<p><a name="bc-saving-models"></a></p>

<h2>Saving Models</h2>

<p>Saving models is <em>really</em> easy: you simply call <code>save</code>. That's all! Well, there are
some subtleties, but that's the basic idea. <code>save</code> will typically <strong>also save relationships</strong>
so if you modify a relationship object or relationship itself, calling <code>save</code> on the
parent object will typically save the relationships as well. <code>save</code> always returns
<code>true</code> or <code>false</code> depending on whether the operation was a success or not. If you'd like
instead to know why a <code>save</code> failed, you can call the method with a <code>true</code> parameter
which sets <code>raise_errors</code> to <code>true</code> and will raise a <tt><a href="VirtualBox/Exceptions/CommandFailedException.html" title="VirtualBox::Exceptions::CommandFailedException (class)">VirtualBox::Exceptions::CommandFailedException</a></tt>
if there is a failure. The message on this object contains the reason.</p>

<p>Below is an example of saving a simple <tt><a href="VirtualBox/VM.html" title="VirtualBox::VM (class)">VirtualBox::VM</a></tt> object:</p>

<pre class="code"><span class='vm identifier id'>vm</span> <span class='assign token'>=</span> <span class='VirtualBox constant id'>VirtualBox</span><span class='colon2 op'>::</span><span class='VM constant id'>VM</span><span class='dot token'>.</span><span class='find identifier id'>find</span><span class='lparen token'>(</span><span class='string val'>&quot;FooVM&quot;</span><span class='rparen token'>)</span>

<span class='comment val'># Double the memory</span>
<span class='vm identifier id'>vm</span><span class='dot token'>.</span><span class='memory identifier id'>memory</span> <span class='assign token'>=</span> <span class='vm identifier id'>vm</span><span class='dot token'>.</span><span class='memory identifier id'>memory</span><span class='dot token'>.</span><span class='to_i identifier id'>to_i</span> <span class='mult op'>*</span> <span class='integer val'>2</span>

<span class='comment val'># This will return true/false depending on success</span>
<span class='vm identifier id'>vm</span><span class='dot token'>.</span><span class='save identifier id'>save</span>
</pre>

<p>Below is an example where an exception will be raised if an error occurs:</p>

<pre class="code"><span class='vm identifier id'>vm</span> <span class='assign token'>=</span> <span class='VirtualBox constant id'>VirtualBox</span><span class='colon2 op'>::</span><span class='VM constant id'>VM</span><span class='dot token'>.</span><span class='find identifier id'>find</span><span class='lparen token'>(</span><span class='string val'>&quot;FooVM&quot;</span><span class='rparen token'>)</span>
<span class='vm identifier id'>vm</span><span class='dot token'>.</span><span class='memory identifier id'>memory</span> <span class='assign token'>=</span> <span class='string val'>&quot;INVALID&quot;</span>

<span class='comment val'># This will raise an exception, since the memory is invalid</span>
<span class='vm identifier id'>vm</span><span class='dot token'>.</span><span class='save identifier id'>save</span><span class='lparen token'>(</span><span class='true true kw'>true</span><span class='rparen token'>)</span>
</pre></div></div>
    
    <div id="footer">
  Generated on Tue Feb 16 00:11:09 2010 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool">yard</a>
  0.5.3 (ruby-1.8.7).
</div>

  </body>
</html>