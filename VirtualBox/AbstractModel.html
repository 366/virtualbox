<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta name="Content-Type" content="text/html; charset=UTF-8" />
<title>Class: VirtualBox::AbstractModel</title>
<link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '..';
  if (relpath != '') relpath += '/';
</script>
<script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/app.js"></script>

  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (A)</a> &raquo; 
    <span class='title'><a href="../VirtualBox.html" title="VirtualBox (module)">VirtualBox</a></span>
     &raquo; 
    <span class="title">AbstractModel</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  <a id="class_list_link" href="#">Class List</a>
  <a id="method_list_link" href="#">Method List</a>
  <a id ="file_list_link" href="#">File List</a>
</div>

      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: VirtualBox::AbstractModel 
  <span class="abstract note title">Abstract</span>
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">VirtualBox::AbstractModel</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
      <dt class="r2">Includes:</dt>
      <dd class="r2"><a href="AbstractModel/Attributable.html" title="VirtualBox::AbstractModel::Attributable (module)">AbstractModel::Attributable</a>, <a href="AbstractModel/Dirty.html" title="VirtualBox::AbstractModel::Dirty (module)">AbstractModel::Dirty</a>, <a href="AbstractModel/Relatable.html" title="VirtualBox::AbstractModel::Relatable (module)">AbstractModel::Relatable</a></dd>
      
    
  
  
    <dt class="r1 last">Defined in:</dt>
    <dd class="r1 last">lib/virtualbox/abstract_model.rb<span class="defines">,<br />
  lib/virtualbox/abstract_model/dirty.rb,<br /> lib/virtualbox/abstract_model/relatable.rb,<br /> lib/virtualbox/abstract_model/attributable.rb</span>
</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p class="note abstract">
  <strong>This class is abstract.</strong> 
  
</p>
<p>AbstractModel is the base class used for most of virtualbox's classes.
It provides convenient ActiveRecord-style model behavior to subclasses.</p>

  </div>
</div>
<div class="tags">
  
</div><div id="subclasses">
  <h2>Direct Known Subclasses</h2>
  <p class="children"><a href="AttachedDevice.html" title="VirtualBox::AttachedDevice (class)">AttachedDevice</a>, <a href="Image.html" title="VirtualBox::Image (class)">Image</a>, <a href="Nic.html" title="VirtualBox::Nic (class)">Nic</a>, <a href="StorageController.html" title="VirtualBox::StorageController (class)">StorageController</a>, <a href="VM.html" title="VirtualBox::VM (class)">VM</a></p>
</div>


  
  
  
  
  
  
  
  
  
  
  
  

  <h2>Instance Method Summary</h2>

  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#destroy-instance_method" title="#destroy (instance method)">- (Object) <strong>destroy</strong>(*args) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc">Destroys the model.</span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#new_record%3F-instance_method" title="#new_record? (instance method)">- (Boolean) <strong>new_record?</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc">Returns a boolean denoting if the record is new or existing.</span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#populate_attributes-instance_method" title="#populate_attributes (instance method)">- (Object) <strong>populate_attributes</strong>(attribs) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc">Sets the initial attributes from a hash.</span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#save-instance_method" title="#save (instance method)">- (Object) <strong>save</strong>(*args) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc">Saves the model attributes and relationships.</span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#save_attribute-instance_method" title="#save_attribute (instance method)">- (Object) <strong>save_attribute</strong>(key, value, *args) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc">Saves a single attribute of the model.</span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#write_attribute-instance_method" title="#write_attribute (instance method)">- (Object) <strong>write_attribute</strong>(name, value) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc">Overwrites <tt><a href="AbstractModel/Attributable.html#write_attribute-instance_method" title="VirtualBox::AbstractModel::Attributable#write_attribute (method)">Attributable#write_attribute</a></tt> to set the dirty state of
the written attribute.</span>
  
</li>

    
  </ul>

  
  
  
  
  
  <h3 class="inherited">Methods included from <a href="AbstractModel/Attributable.html" title="VirtualBox::AbstractModel::Attributable (module)">AbstractModel::Attributable</a></h3>
  <p class="inherited"><a href="AbstractModel/Attributable.html#attributes-instance_method" title="VirtualBox::AbstractModel::Attributable#attributes (method)">#attributes</a>, <a href="AbstractModel/Attributable.html#has_attribute%3F-instance_method" title="VirtualBox::AbstractModel::Attributable#has_attribute? (method)">#has_attribute?</a>, <a href="AbstractModel/Attributable.html#included-class_method" title="VirtualBox::AbstractModel::Attributable.included (method)">included</a>, <a href="AbstractModel/Attributable.html#method_missing-instance_method" title="VirtualBox::AbstractModel::Attributable#method_missing (method)">#method_missing</a>, <a href="AbstractModel/Attributable.html#read_attribute-instance_method" title="VirtualBox::AbstractModel::Attributable#read_attribute (method)">#read_attribute</a>, <a href="AbstractModel/Attributable.html#readonly_attribute%3F-instance_method" title="VirtualBox::AbstractModel::Attributable#readonly_attribute? (method)">#readonly_attribute?</a></p>

  
  
  
  
  
  <h3 class="inherited">Methods included from <a href="AbstractModel/Dirty.html" title="VirtualBox::AbstractModel::Dirty (module)">AbstractModel::Dirty</a></h3>
  <p class="inherited"><a href="AbstractModel/Dirty.html#changed%3F-instance_method" title="VirtualBox::AbstractModel::Dirty#changed? (method)">#changed?</a>, <a href="AbstractModel/Dirty.html#changes-instance_method" title="VirtualBox::AbstractModel::Dirty#changes (method)">#changes</a>, <a href="AbstractModel/Dirty.html#clear_dirty%21-instance_method" title="VirtualBox::AbstractModel::Dirty#clear_dirty! (method)">#clear_dirty!</a>, <a href="AbstractModel/Dirty.html#ignore_dirty-instance_method" title="VirtualBox::AbstractModel::Dirty#ignore_dirty (method)">#ignore_dirty</a>, <a href="AbstractModel/Dirty.html#method_missing-instance_method" title="VirtualBox::AbstractModel::Dirty#method_missing (method)">#method_missing</a>, <a href="AbstractModel/Dirty.html#set_dirty%21-instance_method" title="VirtualBox::AbstractModel::Dirty#set_dirty! (method)">#set_dirty!</a></p>

  
  
  
  
  
  <h3 class="inherited">Methods included from <a href="AbstractModel/Relatable.html" title="VirtualBox::AbstractModel::Relatable (module)">AbstractModel::Relatable</a></h3>
  <p class="inherited"><a href="AbstractModel/Relatable.html#destroy_relationship-instance_method" title="VirtualBox::AbstractModel::Relatable#destroy_relationship (method)">#destroy_relationship</a>, <a href="AbstractModel/Relatable.html#destroy_relationships-instance_method" title="VirtualBox::AbstractModel::Relatable#destroy_relationships (method)">#destroy_relationships</a>, <a href="AbstractModel/Relatable.html#has_relationship%3F-instance_method" title="VirtualBox::AbstractModel::Relatable#has_relationship? (method)">#has_relationship?</a>, <a href="AbstractModel/Relatable.html#included-class_method" title="VirtualBox::AbstractModel::Relatable.included (method)">included</a>, <a href="AbstractModel/Relatable.html#method_missing-instance_method" title="VirtualBox::AbstractModel::Relatable#method_missing (method)">#method_missing</a>, <a href="AbstractModel/Relatable.html#populate_relationships-instance_method" title="VirtualBox::AbstractModel::Relatable#populate_relationships (method)">#populate_relationships</a>, <a href="AbstractModel/Relatable.html#relationship_data-instance_method" title="VirtualBox::AbstractModel::Relatable#relationship_data (method)">#relationship_data</a>, <a href="AbstractModel/Relatable.html#save_relationships-instance_method" title="VirtualBox::AbstractModel::Relatable#save_relationships (method)">#save_relationships</a></p>
<div id="method_missing_details" class="method_details_list">
  <h2>Dynamic Method Handling</h2>
  <p class="notice super">
    This class handles dynamic methods through the <tt>method_missing</tt> method
    
      in the class <a href="AbstractModel/Relatable.html#method_missing-instance_method" title="VirtualBox::AbstractModel::Relatable#method_missing (method)">VirtualBox::AbstractModel::Relatable</a>
    
  </p>
  
</div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="destroy-instance_method">
  
    - (<tt>Object</tt>) <strong>destroy</strong>(*args) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Destroys the model. The exact behaviour of this method is expected to be
defined on the subclasses. This method on AbstractModel simply
propagates the destroy to the dependent relationships. For more information
on relationships, see <tt><a href="AbstractModel/Relatable.html" title="VirtualBox::AbstractModel::Relatable (module)">Relatable</a></tt>.</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


88
89
90
91
92
93</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/virtualbox/abstract_model.rb', line 88</span>

<span class='def def kw'>def</span> <span class='destroy identifier id'>destroy</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span>
  <span class='comment val'># Destroy dependent relationships</span>
  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='relationships identifier id'>relationships</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='bitor op'>|</span>
    <span class='destroy_relationship identifier id'>destroy_relationship</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:dependent</span><span class='rbrack token'>]</span> <span class='eq op'>==</span> <span class='symbol val'>:destroy</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="new_record?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>new_record?</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Returns a boolean denoting if the record is new or existing. This
method is provided for subclasses to use to differentiate between
creating a new object or saving an existing one. An example of this
is <tt><a href="HardDrive.html#save-instance_method" title="VirtualBox::HardDrive#save (method)">HardDrive#save</a></tt> which will create a new hard drive if it didn't
previously exist, or save an old one if it did exist.</p>

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


20
21
22
23</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/virtualbox/abstract_model.rb', line 20</span>

<span class='def def kw'>def</span> <span class='new_record? fid id'>new_record?</span>
  <span class='@new_record ivar id'>@new_record</span> <span class='assign token'>=</span> <span class='true true kw'>true</span> <span class='if if_mod kw'>if</span> <span class='@new_record ivar id'>@new_record</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span>
  <span class='@new_record ivar id'>@new_record</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="populate_attributes-instance_method">
  
    - (<tt>Object</tt>) <strong>populate_attributes</strong>(attribs) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Sets the initial attributes from a hash. This method is meant to be used
once to initially setup the attributes. It is <strong>not a mass-assignment</strong>
method for updating attributes.</p>

<p>This method does <strong>not</strong> affect dirtiness, but also does not clear it.
This means that if you call populate_attributes, the same attributes
that were dirty before the call will be dirty after the call (but no
more and no less). This distinction is important because most subclasses
of AbstractModel only save changed attributes, and ignore unchanged
attributes. Attempting to change attributes through this method will
cause them to not be saved, which is surely unexpected behaviour for
most users.</p>

<p>Calling this method will also cause the model to assume that it is not
a new record (see <tt><a href="#new_record%3F-instance_method" title="VirtualBox::AbstractModel#new_record? (method)">#new_record?</a></tt>).</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


66
67
68
69
70
71
72
73
74
75</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/virtualbox/abstract_model.rb', line 66</span>

<span class='def def kw'>def</span> <span class='populate_attributes identifier id'>populate_attributes</span><span class='lparen token'>(</span><span class='attribs identifier id'>attribs</span><span class='rparen token'>)</span>
  <span class='comment val'># No longer a new record</span>
  <span class='@new_record ivar id'>@new_record</span> <span class='assign token'>=</span> <span class='false false kw'>false</span>
  
  <span class='ignore_dirty identifier id'>ignore_dirty</span> <span class='do do kw'>do</span>
    <span class='super super kw'>super</span>
    
    <span class='populate_relationships identifier id'>populate_relationships</span><span class='lparen token'>(</span><span class='attribs identifier id'>attribs</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="save-instance_method">
  
    - (<tt>Object</tt>) <strong>save</strong>(*args) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Saves the model attributes and relationships.</p>

<p>The method can be passed any arbitrary arguments, which are
implementation specific (see <tt><a href="VM.html#save-instance_method" title="VirtualBox::VM#save (method)">VM#save</a></tt>, which does this).</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


29
30
31
32
33
34
35
36
37
38
39
40</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/virtualbox/abstract_model.rb', line 29</span>

<span class='def def kw'>def</span> <span class='save identifier id'>save</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span>
  <span class='comment val'># Go through changed attributes and call save_attribute for</span>
  <span class='comment val'># those only</span>
  <span class='changes identifier id'>changes</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='key identifier id'>key</span><span class='comma token'>,</span> <span class='values identifier id'>values</span><span class='bitor op'>|</span>
    <span class='save_attribute identifier id'>save_attribute</span><span class='lparen token'>(</span><span class='key identifier id'>key</span><span class='comma token'>,</span> <span class='values identifier id'>values</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>

  <span class='save_relationships identifier id'>save_relationships</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span>
  
  <span class='comment val'># No longer a new record</span>
  <span class='@new_record ivar id'>@new_record</span> <span class='assign token'>=</span> <span class='false false kw'>false</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="save_attribute-instance_method">
  
    - (<tt>Object</tt>) <strong>save_attribute</strong>(key, value, *args) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Saves a single attribute of the model. This method on the abstract
model does nothing on its own, and is expected to be overridden
by any subclasses.</p>

<p>This method clears the dirty status of the attribute.</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


47
48
49</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/virtualbox/abstract_model.rb', line 47</span>

<span class='def def kw'>def</span> <span class='save_attribute identifier id'>save_attribute</span><span class='lparen token'>(</span><span class='key identifier id'>key</span><span class='comma token'>,</span> <span class='value identifier id'>value</span><span class='comma token'>,</span> <span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span>
  <span class='clear_dirty! fid id'>clear_dirty!</span><span class='lparen token'>(</span><span class='key identifier id'>key</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="write_attribute-instance_method">
  
    - (<tt>Object</tt>) <strong>write_attribute</strong>(name, value) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Overwrites <tt><a href="AbstractModel/Attributable.html#write_attribute-instance_method" title="VirtualBox::AbstractModel::Attributable#write_attribute (method)">Attributable#write_attribute</a></tt> to set the dirty state of
the written attribute. See <tt><a href="AbstractModel/Dirty.html#set_dirty%21-instance_method" title="VirtualBox::AbstractModel::Dirty#set_dirty! (method)">Dirty#set_dirty!</a></tt> as well.</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


79
80
81
82</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/virtualbox/abstract_model.rb', line 79</span>

<span class='def def kw'>def</span> <span class='write_attribute identifier id'>write_attribute</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='value identifier id'>value</span><span class='rparen token'>)</span>
  <span class='set_dirty! fid id'>set_dirty!</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='read_attribute identifier id'>read_attribute</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='value identifier id'>value</span><span class='rparen token'>)</span>
  <span class='super super kw'>super</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Sun Jan 24 19:18:07 2010 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool">yard</a>
  0.5.3 (ruby-1.8.7).
</div>

  </body>
</html>