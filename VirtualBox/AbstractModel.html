<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta name="Content-Type" content="text/html; charset=UTF-8" />
<title>Class: VirtualBox::AbstractModel</title>
<link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '..';
  if (relpath != '') relpath += '/';
</script>
<script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/app.js"></script>

  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (A)</a> &raquo; 
    <span class='title'><a href="../VirtualBox.html" title="VirtualBox (module)">VirtualBox</a></span>
     &raquo; 
    <span class="title">AbstractModel</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  <a id="class_list_link" href="#">Class List</a>
  <a id="method_list_link" href="#">Method List</a>
  <a id ="file_list_link" href="#">File List</a>
</div>

      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: VirtualBox::AbstractModel 
  <span class="abstract note title">Abstract</span>
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">VirtualBox::AbstractModel</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
      <dt class="r2">Includes:</dt>
      <dd class="r2"><a href="AbstractModel/Attributable.html" title="VirtualBox::AbstractModel::Attributable (module)">AbstractModel::Attributable</a>, <a href="AbstractModel/Dirty.html" title="VirtualBox::AbstractModel::Dirty (module)">AbstractModel::Dirty</a>, <a href="AbstractModel/Relatable.html" title="VirtualBox::AbstractModel::Relatable (module)">AbstractModel::Relatable</a>, <a href="AbstractModel/Validatable.html" title="VirtualBox::AbstractModel::Validatable (module)">AbstractModel::Validatable</a></dd>
      
    
  
  
    <dt class="r1 last">Defined in:</dt>
    <dd class="r1 last">lib/virtualbox/abstract_model.rb<span class="defines">,<br />
  lib/virtualbox/abstract_model/dirty.rb,<br /> lib/virtualbox/abstract_model/relatable.rb,<br /> lib/virtualbox/abstract_model/validatable.rb,<br /> lib/virtualbox/abstract_model/attributable.rb</span>
</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p class="note abstract">
  <strong>This class is abstract.</strong> 
  
</p>
<p>AbstractModel is the base class used for most of virtualbox's classes.
It provides convenient ActiveRecord-style model behavior to subclasses.</p>

  </div>
</div>
<div class="tags">
  
</div><div id="subclasses">
  <h2>Direct Known Subclasses</h2>
  <p class="children"><a href="AttachedDevice.html" title="VirtualBox::AttachedDevice (class)">AttachedDevice</a>, <a href="ForwardedPort.html" title="VirtualBox::ForwardedPort (class)">ForwardedPort</a>, <a href="Image.html" title="VirtualBox::Image (class)">Image</a>, <a href="Nic.html" title="VirtualBox::Nic (class)">Nic</a>, <a href="SharedFolder.html" title="VirtualBox::SharedFolder (class)">SharedFolder</a>, <a href="StorageController.html" title="VirtualBox::StorageController (class)">StorageController</a>, <a href="VM.html" title="VirtualBox::VM (class)">VM</a></p>
</div>


  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  

  <h2>Instance Method Summary</h2>

  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#destroy-instance_method" title="#destroy (instance method)">- (Object) <strong>destroy</strong>(*args) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc">Destroys the model.</span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#errors-instance_method" title="#errors (instance method)">- (Object) <strong>errors</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc">Returns the errors for a model.</span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#existing_record%21-instance_method" title="#existing_record! (instance method)">- (Object) <strong>existing_record!</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc">Explicitly sets the model to not be a new record.</span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#inspect-instance_method" title="#inspect (instance method)">- (Object) <strong>inspect</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc">Creates a human-readable format for this model.</span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#new_record%21-instance_method" title="#new_record! (instance method)">- (Object) <strong>new_record!</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc">Explicitly resets the model to a new record.</span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#new_record%3F-instance_method" title="#new_record? (instance method)">- (Boolean) <strong>new_record?</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc">Returns a boolean denoting if the record is new or existing.</span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#populate_attributes-instance_method" title="#populate_attributes (instance method)">- (Object) <strong>populate_attributes</strong>(attribs) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc">Sets the initial attributes from a hash.</span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#save-instance_method" title="#save (instance method)">- (Object) <strong>save</strong>(*args) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc">Saves the model attributes and relationships.</span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#save_attribute-instance_method" title="#save_attribute (instance method)">- (Object) <strong>save_attribute</strong>(key, value, *args) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc">Saves a single attribute of the model.</span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_relationship-instance_method" title="#set_relationship (instance method)">- (Object) <strong>set_relationship</strong>(key, value) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc">Overwrites <tt><a href="AbstractModel/Relatable.html#set_relationship-instance_method" title="VirtualBox::AbstractModel::Relatable#set_relationship (method)">Relatable#set_relationship</a></tt> to set the dirty state of the
relationship.</span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#validate-instance_method" title="#validate (instance method)">- (Object) <strong>validate</strong>(*args) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc">Validates the model and relationships.</span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#write_attribute-instance_method" title="#write_attribute (instance method)">- (Object) <strong>write_attribute</strong>(name, value) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc">Overwrites <tt><a href="AbstractModel/Attributable.html#write_attribute-instance_method" title="VirtualBox::AbstractModel::Attributable#write_attribute (method)">Attributable#write_attribute</a></tt> to set the dirty state of
the written attribute.</span>
  
</li>

    
  </ul>

  
  
  
  
  
  <h3 class="inherited">Methods included from <a href="AbstractModel/Attributable.html" title="VirtualBox::AbstractModel::Attributable (module)">AbstractModel::Attributable</a></h3>
  <p class="inherited"><a href="AbstractModel/Attributable.html#attributes-instance_method" title="VirtualBox::AbstractModel::Attributable#attributes (method)">#attributes</a>, <a href="AbstractModel/Attributable.html#has_attribute%3F-instance_method" title="VirtualBox::AbstractModel::Attributable#has_attribute? (method)">#has_attribute?</a>, <a href="AbstractModel/Attributable.html#included-class_method" title="VirtualBox::AbstractModel::Attributable.included (method)">included</a>, <a href="AbstractModel/Attributable.html#read_attribute-instance_method" title="VirtualBox::AbstractModel::Attributable#read_attribute (method)">#read_attribute</a>, <a href="AbstractModel/Attributable.html#readonly_attribute%3F-instance_method" title="VirtualBox::AbstractModel::Attributable#readonly_attribute? (method)">#readonly_attribute?</a></p>

  
  
  
  
  
  <h3 class="inherited">Methods included from <a href="AbstractModel/Dirty.html" title="VirtualBox::AbstractModel::Dirty (module)">AbstractModel::Dirty</a></h3>
  <p class="inherited"><a href="AbstractModel/Dirty.html#changed%3F-instance_method" title="VirtualBox::AbstractModel::Dirty#changed? (method)">#changed?</a>, <a href="AbstractModel/Dirty.html#changes-instance_method" title="VirtualBox::AbstractModel::Dirty#changes (method)">#changes</a>, <a href="AbstractModel/Dirty.html#clear_dirty%21-instance_method" title="VirtualBox::AbstractModel::Dirty#clear_dirty! (method)">#clear_dirty!</a>, <a href="AbstractModel/Dirty.html#ignore_dirty-instance_method" title="VirtualBox::AbstractModel::Dirty#ignore_dirty (method)">#ignore_dirty</a>, <a href="AbstractModel/Dirty.html#method_missing-instance_method" title="VirtualBox::AbstractModel::Dirty#method_missing (method)">#method_missing</a>, <a href="AbstractModel/Dirty.html#set_dirty%21-instance_method" title="VirtualBox::AbstractModel::Dirty#set_dirty! (method)">#set_dirty!</a></p>

  
  
  
  
  
  <h3 class="inherited">Methods included from <a href="AbstractModel/Relatable.html" title="VirtualBox::AbstractModel::Relatable (module)">AbstractModel::Relatable</a></h3>
  <p class="inherited"><a href="AbstractModel/Relatable.html#destroy_relationship-instance_method" title="VirtualBox::AbstractModel::Relatable#destroy_relationship (method)">#destroy_relationship</a>, <a href="AbstractModel/Relatable.html#destroy_relationships-instance_method" title="VirtualBox::AbstractModel::Relatable#destroy_relationships (method)">#destroy_relationships</a>, <a href="AbstractModel/Relatable.html#has_relationship%3F-instance_method" title="VirtualBox::AbstractModel::Relatable#has_relationship? (method)">#has_relationship?</a>, <a href="AbstractModel/Relatable.html#included-class_method" title="VirtualBox::AbstractModel::Relatable.included (method)">included</a>, <a href="AbstractModel/Relatable.html#populate_relationships-instance_method" title="VirtualBox::AbstractModel::Relatable#populate_relationships (method)">#populate_relationships</a>, <a href="AbstractModel/Relatable.html#relationship_data-instance_method" title="VirtualBox::AbstractModel::Relatable#relationship_data (method)">#relationship_data</a>, <a href="AbstractModel/Relatable.html#save_relationships-instance_method" title="VirtualBox::AbstractModel::Relatable#save_relationships (method)">#save_relationships</a></p>

  
  
  
  
  
  <h3 class="inherited">Methods included from <a href="AbstractModel/Validatable.html" title="VirtualBox::AbstractModel::Validatable (module)">AbstractModel::Validatable</a></h3>
  <p class="inherited"><a href="AbstractModel/Validatable.html#add_error-instance_method" title="VirtualBox::AbstractModel::Validatable#add_error (method)">#add_error</a>, <a href="AbstractModel/Validatable.html#clear_errors-instance_method" title="VirtualBox::AbstractModel::Validatable#clear_errors (method)">#clear_errors</a>, <a href="AbstractModel/Validatable.html#valid%3F-instance_method" title="VirtualBox::AbstractModel::Validatable#valid? (method)">#valid?</a>, <a href="AbstractModel/Validatable.html#validates_presence_of-instance_method" title="VirtualBox::AbstractModel::Validatable#validates_presence_of (method)">#validates_presence_of</a></p>
<div id="method_missing_details" class="method_details_list">
  <h2>Dynamic Method Handling</h2>
  <p class="notice super">
    This class handles dynamic methods through the <tt>method_missing</tt> method
    
      in the class <a href="AbstractModel/Dirty.html#method_missing-instance_method" title="VirtualBox::AbstractModel::Dirty#method_missing (method)">VirtualBox::AbstractModel::Dirty</a>
    
  </p>
  
</div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="destroy-instance_method">
  
    - (<tt>Object</tt>) <strong>destroy</strong>(*args) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Destroys the model. The exact behaviour of this method is expected to be
defined on the subclasses. This method on AbstractModel simply
propagates the destroy to the dependent relationships. For more information
on relationships, see <tt><a href="AbstractModel/Relatable.html" title="VirtualBox::AbstractModel::Relatable (module)">Relatable</a></tt>.</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


141
142
143
144
145
146</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/virtualbox/abstract_model.rb', line 141</span>

<span class='def def kw'>def</span> <span class='destroy identifier id'>destroy</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span>
  <span class='comment val'># Destroy dependent relationships</span>
  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='relationships identifier id'>relationships</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='bitor op'>|</span>
    <span class='destroy_relationship identifier id'>destroy_relationship</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:dependent</span><span class='rbrack token'>]</span> <span class='eq op'>==</span> <span class='symbol val'>:destroy</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="errors-instance_method">
  
    - (<tt>Object</tt>) <strong>errors</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Returns the errors for a model.</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


42
43
44
45
46
47
48
49
50
51
52
53</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/virtualbox/abstract_model.rb', line 42</span>

<span class='def def kw'>def</span> <span class='errors identifier id'>errors</span>
  <span class='error_hash identifier id'>error_hash</span> <span class='assign token'>=</span> <span class='super super kw'>super</span>

  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='relationships identifier id'>relationships</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='bitor op'>|</span>
    <span class='next next kw'>next</span> <span class='unless unless_mod kw'>unless</span> <span class='options identifier id'>options</span> <span class='andop op'>&amp;&amp;</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:klass</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='symbol val'>:errors_for_relationship</span><span class='rparen token'>)</span>
    <span class='relationship_errors identifier id'>relationship_errors</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:klass</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='errors_for_relationship identifier id'>errors_for_relationship</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='comma token'>,</span> <span class='relationship_data identifier id'>relationship_data</span><span class='lbrack token'>[</span><span class='name identifier id'>name</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>

    <span class='error_hash identifier id'>error_hash</span><span class='dot token'>.</span><span class='merge! fid id'>merge!</span><span class='lparen token'>(</span><span class='lbrace token'>{</span> <span class='symbol val'>:foos</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='relationship_errors identifier id'>relationship_errors</span> <span class='rbrace token'>}</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='relationship_errors identifier id'>relationship_errors</span><span class='dot token'>.</span><span class='length identifier id'>length</span> <span class='gt op'>&gt;</span> <span class='integer val'>0</span>
  <span class='end end kw'>end</span>

  <span class='error_hash identifier id'>error_hash</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="existing_record!-instance_method">
  
    - (<tt>Object</tt>) <strong>existing_record!</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Explicitly sets the model to not be a new record. If you're using
this method outside of virtualbox library core, you should really
be asking yourself "why?"</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


37
38
39</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/virtualbox/abstract_model.rb', line 37</span>

<span class='def def kw'>def</span> <span class='existing_record! fid id'>existing_record!</span>
  <span class='@new_record ivar id'>@new_record</span> <span class='assign token'>=</span> <span class='false false kw'>false</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="inspect-instance_method">
  
    - (<tt>Object</tt>) <strong>inspect</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Creates a human-readable format for this model. This method overrides the
default <code>#&lt;class&gt;</code> syntax since this doesn't work well for AbstractModels.
Instead, it abbreviates it, instead showing all the attributes and their
values, and <code>...</code> for relationships.</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


152
153
154
155
156
157
158
159
160
161
162
163
164</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/virtualbox/abstract_model.rb', line 152</span>

<span class='def def kw'>def</span> <span class='inspect identifier id'>inspect</span>
  <span class='values identifier id'>values</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>

  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='attributes identifier id'>attributes</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='bitor op'>|</span>
    <span class='values identifier id'>values</span><span class='dot token'>.</span><span class='push identifier id'>push</span><span class='lparen token'>(</span><span class='dstring node'>&quot;#{name.inspect}=#{read_attribute(name).inspect}&quot;</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>

  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='relationships identifier id'>relationships</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='bitor op'>|</span>
    <span class='values identifier id'>values</span><span class='dot token'>.</span><span class='push identifier id'>push</span><span class='lparen token'>(</span><span class='dstring node'>&quot;#{name.inspect}=...&quot;</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>

  <span class='dstring node'>&quot;#&lt;#{self.class} #{values.join(&quot;, &quot;)}&gt;&quot;</span><span class='dot token'>.</span><span class='strip identifier id'>strip</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="new_record!-instance_method">
  
    - (<tt>Object</tt>) <strong>new_record!</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Explicitly resets the model to a new record. If you're using this
method outside of virtualbox library core, you should really be
asking yourself "why?"</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


30
31
32</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/virtualbox/abstract_model.rb', line 30</span>

<span class='def def kw'>def</span> <span class='new_record! fid id'>new_record!</span>
  <span class='@new_record ivar id'>@new_record</span> <span class='assign token'>=</span> <span class='true true kw'>true</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="new_record?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>new_record?</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Returns a boolean denoting if the record is new or existing. This
method is provided for subclasses to use to differentiate between
creating a new object or saving an existing one. An example of this
is <tt><a href="HardDrive.html#save-instance_method" title="VirtualBox::HardDrive#save (method)">HardDrive#save</a></tt> which will create a new hard drive if it didn't
previously exist, or save an old one if it did exist.</p>

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


22
23
24
25</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/virtualbox/abstract_model.rb', line 22</span>

<span class='def def kw'>def</span> <span class='new_record? fid id'>new_record?</span>
  <span class='new_record! fid id'>new_record!</span> <span class='if if_mod kw'>if</span> <span class='@new_record ivar id'>@new_record</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span>
  <span class='@new_record ivar id'>@new_record</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="populate_attributes-instance_method">
  
    - (<tt>Object</tt>) <strong>populate_attributes</strong>(attribs) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Sets the initial attributes from a hash. This method is meant to be used
once to initially setup the attributes. It is <strong>not a mass-assignment</strong>
method for updating attributes.</p>

<p>This method does <strong>not</strong> affect dirtiness, but also does not clear it.
This means that if you call populate_attributes, the same attributes
that were dirty before the call will be dirty after the call (but no
more and no less). This distinction is important because most subclasses
of AbstractModel only save changed attributes, and ignore unchanged
attributes. Attempting to change attributes through this method will
cause them to not be saved, which is surely unexpected behaviour for
most users.</p>

<p>Calling this method will also cause the model to assume that it is not
a new record (see <tt><a href="#new_record%3F-instance_method" title="VirtualBox::AbstractModel#new_record? (method)">#new_record?</a></tt>).</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


111
112
113
114
115
116
117
118
119
120</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/virtualbox/abstract_model.rb', line 111</span>

<span class='def def kw'>def</span> <span class='populate_attributes identifier id'>populate_attributes</span><span class='lparen token'>(</span><span class='attribs identifier id'>attribs</span><span class='rparen token'>)</span>
  <span class='comment val'># No longer a new record</span>
  <span class='@new_record ivar id'>@new_record</span> <span class='assign token'>=</span> <span class='false false kw'>false</span>

  <span class='ignore_dirty identifier id'>ignore_dirty</span> <span class='do do kw'>do</span>
    <span class='super super kw'>super</span>

    <span class='populate_relationships identifier id'>populate_relationships</span><span class='lparen token'>(</span><span class='attribs identifier id'>attribs</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="save-instance_method">
  
    - (<tt>Object</tt>) <strong>save</strong>(*args) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Saves the model attributes and relationships.</p>

<p>The method can be passed any arbitrary arguments, which are
implementation specific (see <tt><a href="VM.html#save-instance_method" title="VirtualBox::VM#save (method)">VM#save</a></tt>, which does this).</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


74
75
76
77
78
79
80
81
82
83
84
85</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/virtualbox/abstract_model.rb', line 74</span>

<span class='def def kw'>def</span> <span class='save identifier id'>save</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span>
  <span class='comment val'># Go through changed attributes and call save_attribute for</span>
  <span class='comment val'># those only</span>
  <span class='changes identifier id'>changes</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='key identifier id'>key</span><span class='comma token'>,</span> <span class='values identifier id'>values</span><span class='bitor op'>|</span>
    <span class='save_attribute identifier id'>save_attribute</span><span class='lparen token'>(</span><span class='key identifier id'>key</span><span class='comma token'>,</span> <span class='values identifier id'>values</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>

  <span class='save_relationships identifier id'>save_relationships</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span>

  <span class='comment val'># No longer a new record</span>
  <span class='@new_record ivar id'>@new_record</span> <span class='assign token'>=</span> <span class='false false kw'>false</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="save_attribute-instance_method">
  
    - (<tt>Object</tt>) <strong>save_attribute</strong>(key, value, *args) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Saves a single attribute of the model. This method on the abstract
model does nothing on its own, and is expected to be overridden
by any subclasses.</p>

<p>This method clears the dirty status of the attribute.</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


92
93
94</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/virtualbox/abstract_model.rb', line 92</span>

<span class='def def kw'>def</span> <span class='save_attribute identifier id'>save_attribute</span><span class='lparen token'>(</span><span class='key identifier id'>key</span><span class='comma token'>,</span> <span class='value identifier id'>value</span><span class='comma token'>,</span> <span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span>
  <span class='clear_dirty! fid id'>clear_dirty!</span><span class='lparen token'>(</span><span class='key identifier id'>key</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="set_relationship-instance_method">
  
    - (<tt>Object</tt>) <strong>set_relationship</strong>(key, value) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Overwrites <tt><a href="AbstractModel/Relatable.html#set_relationship-instance_method" title="VirtualBox::AbstractModel::Relatable#set_relationship (method)">Relatable#set_relationship</a></tt> to set the dirty state of the
relationship. See <tt><a href="AbstractModel/Dirty.html#set_dirty%21-instance_method" title="VirtualBox::AbstractModel::Dirty#set_dirty! (method)">Dirty#set_dirty!</a></tt> as well.</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


131
132
133
134
135</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/virtualbox/abstract_model.rb', line 131</span>

<span class='def def kw'>def</span> <span class='set_relationship identifier id'>set_relationship</span><span class='lparen token'>(</span><span class='key identifier id'>key</span><span class='comma token'>,</span> <span class='value identifier id'>value</span><span class='rparen token'>)</span>
  <span class='existing identifier id'>existing</span> <span class='assign token'>=</span> <span class='relationship_data identifier id'>relationship_data</span><span class='lbrack token'>[</span><span class='key identifier id'>key</span><span class='rbrack token'>]</span>
  <span class='new_value identifier id'>new_value</span> <span class='assign token'>=</span> <span class='super super kw'>super</span>
  <span class='set_dirty! fid id'>set_dirty!</span><span class='lparen token'>(</span><span class='key identifier id'>key</span><span class='comma token'>,</span> <span class='existing identifier id'>existing</span><span class='comma token'>,</span> <span class='new_value identifier id'>new_value</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="validate-instance_method">
  
    - (<tt>Object</tt>) <strong>validate</strong>(*args) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Validates the model and relationships.</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


56
57
58
59
60
61
62
63
64
65
66
67
68</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/virtualbox/abstract_model.rb', line 56</span>

<span class='def def kw'>def</span> <span class='validate identifier id'>validate</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span>
  <span class='comment val'># First clear all previous errors</span>
  <span class='clear_errors identifier id'>clear_errors</span>

  <span class='comment val'># Then do the validations</span>
  <span class='failed identifier id'>failed</span> <span class='assign token'>=</span> <span class='false false kw'>false</span>
  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='relationships identifier id'>relationships</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='bitor op'>|</span>
    <span class='next next kw'>next</span> <span class='unless unless_mod kw'>unless</span> <span class='options identifier id'>options</span> <span class='andop op'>&amp;&amp;</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:klass</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='symbol val'>:validate_relationship</span><span class='rparen token'>)</span>
    <span class='failed identifier id'>failed</span> <span class='assign token'>=</span> <span class='true true kw'>true</span> <span class='if if_mod kw'>if</span> <span class='notop op'>!</span><span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:klass</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='validate_relationship identifier id'>validate_relationship</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='comma token'>,</span> <span class='relationship_data identifier id'>relationship_data</span><span class='lbrack token'>[</span><span class='name identifier id'>name</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>

  <span class='return return kw'>return</span> <span class='notop op'>!</span><span class='failed identifier id'>failed</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="write_attribute-instance_method">
  
    - (<tt>Object</tt>) <strong>write_attribute</strong>(name, value) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Overwrites <tt><a href="AbstractModel/Attributable.html#write_attribute-instance_method" title="VirtualBox::AbstractModel::Attributable#write_attribute (method)">Attributable#write_attribute</a></tt> to set the dirty state of
the written attribute. See <tt><a href="AbstractModel/Dirty.html#set_dirty%21-instance_method" title="VirtualBox::AbstractModel::Dirty#set_dirty! (method)">Dirty#set_dirty!</a></tt> as well.</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


124
125
126
127</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/virtualbox/abstract_model.rb', line 124</span>

<span class='def def kw'>def</span> <span class='write_attribute identifier id'>write_attribute</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='value identifier id'>value</span><span class='rparen token'>)</span>
  <span class='set_dirty! fid id'>set_dirty!</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='read_attribute identifier id'>read_attribute</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='value identifier id'>value</span><span class='rparen token'>)</span>
  <span class='super super kw'>super</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Sun Jan 31 00:07:50 2010 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool">yard</a>
  0.5.3 (ruby-1.8.7).
</div>

  </body>
</html>